import{S as N,i as V,s as Y,e as q,c as k,a as H,d as E,b as W,f as j,n as F,o as u,g as G}from"./index.da907017.js";var R=1e-6,T=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,n=arguments.length;n--;)e+=arguments[n]*arguments[n];return Math.sqrt(e)});function I(){var e=new T(16);return T!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function K(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function X(e,n,c){var t=Math.sin(c),a=Math.cos(c),r=n[0],o=n[1],f=n[2],d=n[3],m=n[8],i=n[9],v=n[10],h=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=r*a-m*t,e[1]=o*a-i*t,e[2]=f*a-v*t,e[3]=d*a-h*t,e[8]=r*t+m*a,e[9]=o*t+i*a,e[10]=f*t+v*a,e[11]=d*t+h*a,e}function J(e,n,c,t,a){var r=1/Math.tan(n/2),o;return e[0]=r/c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(o=1/(t-a),e[10]=(a+t)*o,e[14]=2*a*t*o):(e[10]=-1,e[14]=-2*t),e}var C=J;function Q(e,n,c,t){var a,r,o,f,d,m,i,v,h,s,g=n[0],p=n[1],A=n[2],y=t[0],b=t[1],_=t[2],M=c[0],x=c[1],P=c[2];return Math.abs(g-M)<R&&Math.abs(p-x)<R&&Math.abs(A-P)<R?K(e):(i=g-M,v=p-x,h=A-P,s=1/Math.hypot(i,v,h),i*=s,v*=s,h*=s,a=b*h-_*v,r=_*i-y*h,o=y*v-b*i,s=Math.hypot(a,r,o),s?(s=1/s,a*=s,r*=s,o*=s):(a=0,r=0,o=0),f=v*o-h*r,d=h*a-i*o,m=i*r-v*a,s=Math.hypot(f,d,m),s?(s=1/s,f*=s,d*=s,m*=s):(f=0,d=0,m=0),e[0]=a,e[1]=f,e[2]=i,e[3]=0,e[4]=r,e[5]=d,e[6]=v,e[7]=0,e[8]=o,e[9]=m,e[10]=h,e[11]=0,e[12]=-(a*g+r*p+o*A),e[13]=-(f*g+d*p+m*A),e[14]=-(i*g+v*p+h*A),e[15]=1,e)}var Z=`precision highp float;

attribute vec3 position;
attribute float index;
uniform mat4 pMatrix;
uniform mat4 mvMatrix;
uniform float time;
varying vec4 vColor;

void main(void) {
	vColor = vec4(.0, .15, .3, cos(5. * time + 1. + index / (5. + 3. * sin(time / 40.))));
	vec4 mvPosition = mvMatrix * vec4(position, 1.0);
	gl_Position = pMatrix * mvPosition;
	gl_PointSize = 15.0 / length(mvPosition.xyz);
}`;function $(e){let n;return{c(){n=q("canvas"),this.h()},l(c){n=k(c,"CANVAS",{class:!0}),H(n).forEach(E),this.h()},h(){W(n,"class","svelte-vb304v")},m(c,t){j(c,n,t),e[1](n)},p:F,i:F,o:F,d(c){c&&E(n),e[1](null)}}}function ee(e,n,c){let t;u(()=>{c(0,t.width=window.innerWidth/1.1,t),c(0,t.height=window.innerHeight/1.1,t);const r=t.getContext("webgl2");r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE),r.clearColor(0,0,0,0);const o=r.createShader(r.VERTEX_SHADER);r.shaderSource(o,Z),r.compileShader(o);const f=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(f,`precision highp float;

varying vec4 vColor;

void main(void){
    gl_FragColor = vColor;
} `),r.compileShader(f),!r.getShaderParameter(o,r.COMPILE_STATUS)){const l=r.getShaderInfoLog(o);console.error(`vert Shader compilation failed: ${l}`)}if(!r.getShaderParameter(f,r.COMPILE_STATUS)){const l=r.getShaderInfoLog(f);console.error(`Shader compilation failed: ${l}`)}const i=r.createProgram();if(r.attachShader(i,o),r.attachShader(i,f),r.linkProgram(i),r.useProgram(i),!r.getProgramParameter(i,r.LINK_STATUS)){const l=r.getProgramInfoLog(i);console.error(`Program linking failed: ${l}`)}const h=2e3,s=[],g=[];function p(l,w){const S=Math.acos(1-2*l/w),L=Math.sqrt(w*Math.PI)*S,O=Math.cos(L)*Math.sin(S),U=Math.sin(L)*Math.sin(S),D=Math.cos(S);return{x:O,y:U,z:D}}for(let l=0;l<h;l++){const{x:w,y:S,z:L}=p(l,h);s.push(w,S,L),g.push(l)}const A=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,A),r.bufferData(r.ARRAY_BUFFER,new Float32Array(s),r.STATIC_DRAW);const y=r.getAttribLocation(i,"position");r.vertexAttribPointer(y,3,r.FLOAT,!1,0,0),r.enableVertexAttribArray(y);const b=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,b),r.bufferData(r.ARRAY_BUFFER,new Float32Array(g),r.STATIC_DRAW);const _=r.getAttribLocation(i,"index");r.vertexAttribPointer(_,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(_);const M=I(),x=I(),P=r.getUniformLocation(i,"mvMatrix"),B=r.getUniformLocation(i,"pMatrix"),z=r.getUniformLocation(i,"time");Q(M,[0,0,2],[0,0,0],[0,1,0]),C(x,Math.PI/2,t.width/t.height,.1,10),requestAnimationFrame(function l(){r.clear(r.COLOR_BUFFER_BIT),X(M,M,.002),r.uniformMatrix4fv(P,!1,M),r.uniformMatrix4fv(B,!1,x),r.uniform1fv(z,[performance.now()/2e3]),r.drawArrays(r.POINTS,0,h),requestAnimationFrame(l)}),window.addEventListener("resize",()=>{c(0,t.width=window.innerWidth/1.1,t),c(0,t.height=window.innerHeight/1.1,t),r.viewport(0,0,t.width,t.height),C(x,Math.PI/2,t.width/t.height,.1,10)})});function a(r){G[r?"unshift":"push"](()=>{t=r,c(0,t)})}return[t,a]}class ne extends N{constructor(n){super(),V(this,n,ee,$,Y,{})}}export{ne as default};
