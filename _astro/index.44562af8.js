import{n as j,s as z,G as C,H as E,l as D,I as S}from"./index.da907017.js";const y=[];function M(t,o=j){let s;const n=new Set;function r(i){if(z(t,i)&&(t=i,s)){const p=!y.length;for(const c of n)c[1](),y.push(c,t);if(p){for(let c=0;c<y.length;c+=2)y[c][0](y[c+1]);y.length=0}}}function e(i){r(i(t))}function f(i,p=j){const c=[i,p];return n.add(c),n.size===1&&(s=o(r)||j),i(t),()=>{n.delete(c),n.size===0&&(s(),s=null)}}return{set:r,update:e,subscribe:f}}function k(t){return Object.prototype.toString.call(t)==="[object Date]"}function P(t,o,s,n){if(typeof s=="number"||k(s)){const r=n-s,e=(s-o)/(t.dt||1/60),f=t.opts.stiffness*r,i=t.opts.damping*e,p=(f-i)*t.inv_mass,c=(e+p)*t.dt;return Math.abs(c)<t.opts.precision&&Math.abs(r)<t.opts.precision?n:(t.settled=!1,k(s)?new Date(s.getTime()+c):s+c)}else{if(Array.isArray(s))return s.map((r,e)=>P(t,o[e],s[e],n[e]));if(typeof s=="object"){const r={};for(const e in s)r[e]=P(t,o[e],s[e],n[e]);return r}else throw new Error(`Cannot spring ${typeof s} values`)}}function G(t,o={}){const s=M(t),{stiffness:n=.15,damping:r=.8,precision:e=.01}=o;let f,i,p,c=t,m=t,l=1,A=0,b=!1;function g(u,a={}){m=u;const O=p={};return t==null||a.hard||d.stiffness>=1&&d.damping>=1?(b=!0,f=E(),c=u,s.set(t=m),Promise.resolve()):(a.soft&&(A=1/((a.soft===!0?.5:+a.soft)*60),l=0),i||(f=E(),b=!1,i=D(h=>{if(b)return b=!1,i=null,!1;l=Math.min(l+A,1);const w={inv_mass:l,opts:d,settled:!0,dt:(h-f)*60/1e3},T=P(w,c,t,m);return f=h,c=t,s.set(t=T),w.settled&&(i=null),!w.settled})),new Promise(h=>{i.promise.then(()=>{O===p&&h()})}))}const d={set:g,update:(u,a)=>g(u(m,t),a),subscribe:s.subscribe,stiffness:n,damping:r,precision:e};return d}function q(t,o){if(t===o||t!==t)return()=>t;const s=typeof t;if(s!==typeof o||Array.isArray(t)!==Array.isArray(o))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=o.map((r,e)=>q(t[e],r));return r=>n.map(e=>e(r))}if(s==="object"){if(!t||!o)throw new Error("Object cannot be null");if(k(t)&&k(o)){t=t.getTime(),o=o.getTime();const e=o-t;return f=>new Date(t+f*e)}const n=Object.keys(o),r={};return n.forEach(e=>{r[e]=q(t[e],o[e])}),e=>{const f={};return n.forEach(i=>{f[i]=r[i](e)}),f}}if(s==="number"){const n=o-t;return r=>t+r*n}throw new Error(`Cannot interpolate ${s} values`)}function H(t,o={}){const s=M(t);let n,r=t;function e(f,i){if(t==null)return s.set(t=f),Promise.resolve();r=f;let p=n,c=!1,{delay:m=0,duration:l=400,easing:A=S,interpolate:b=q}=C(C({},o),i);if(l===0)return p&&(p.abort(),p=null),s.set(t=r),Promise.resolve();const g=E()+m;let d;return n=D(u=>{if(u<g)return!0;c||(d=b(t,f),typeof l=="function"&&(l=l(t,f)),c=!0),p&&(p.abort(),p=null);const a=u-g;return a>l?(s.set(t=f),!1):(s.set(t=d(A(a/l))),!0)}),n.promise}return{set:e,update:(f,i)=>e(f(r,t),i),subscribe:s.subscribe}}export{G as s,H as t};
